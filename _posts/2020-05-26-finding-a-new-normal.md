---
layout: post
title:  "Finding a New Normal"
date:   2020-05-26 15:00:00 +1000
categories: 100daystooffload technology splunk ramblings
---

Efforts to get the homelab up and running continue still. The effort yesterday and today have been focused on getting Splunk up and running with Ansible and adding this to the existing workflow. After first working through and trying to get the Splunk/Ansible playbook that Splunk have listed on their Github page to work, I eventually gave up. I'd like to take a moment here to make a comment towards any vendor writing up documentation (or any person for that matter): _Don't make your documentation conversational, make it usable_. If I'm having to read through it to figure something out, I want it to be as specific and succinct as possible to ensure I can get everything up and running with as little fuss as possible. Trying to make it anything other than dry and boring just means you've probably failed at one or both of those requirements. By glossing over parts of the command set you're reducing my ability to understand the product, which is counter to the point of documentation in the first place. If I need to use another document to help me get understand what you're conveying, something has gone wrong. Following this moment of frustration, I decided it would be faster to simply use the Splunk Docker image instead and run that on my system. This turned out to be absolutely the case, within a few minutes I was up and mostly sorted. Install Portainer in addition so I could see what was going on and it looked like I was good to go.

I'm not quite sure how or why, but Splunk seems to constantly cause me problems with my vCenter environment. Every time it gets installed, a few hours later vCenter will lock up due to filesystem read errors. As happened early this morning when I was unable to log on to expand the VM disk. I provision my VM's with a pretty minimal amount of disk space, which for most systems of course is fine - 16GB is plenty for most things that I do. Splunk is an obvious exception. Aside from the size of the Docker image itself, it also collects data, so is going to expand over time. So the first mission this morning was to extend the disk on the VM. vCenter had completely stopped - it wasn't even able to process the password to log into the VM. After a quick power cycle, I managed to get into the shell and run `fsck /dev/sda3` which resolved the problem. One more power cycle later and we were back in business! At this point I thought it might be a good idea to restart the system from scratch, so I went and deleted all the VM's except vCenter and redeployed them. A perfect test for my Ansible scripts to get everything up and running again and... they worked! SSH keys distributed, new Ansible node created and all servers updated. As I get more of the lab converted to playbooks it will be good to try them out like this to confirm everything works. What in the past would have taken an hour or two literally took me 10 minutes, mostly due to having to wait for the VM clone operation to finish.

As it stands I still had to manually reinstall Splunk, but I believe that with the Docker Ansible module I should be able to get this to an automated process within the next couple of days. It's a relieving feeling to see something come together easier than expected (unlike that f*cking Jekyll module).

In a completely unrelated area, the hope of life after lockdown seems more and more real every day. I received an email today from my aerials coach informing everyone about what will be happening as we move towards reopening gyms and studios. At the same time, I've been in contact with a couple of friends about starting up rock climbing, seeing my SCUBA diving starting back up, and plans with people to go out and have dinners and coffees together. All together, it feels like there is optimism and excitement about being able to pick up from where we left off a couple of months ago and get back to the way we used to be, as much as we can. A definite part of that excitement for me is being able to get rid of the weight I put on recently. Looking through my Fitbit weight logs there's been a definite spike since March, enough to offset most of the weight that I lost from January until the lockdown started, which is frustrating. With a bit of luck I'll be able to shed the weight a bit faster this time around by doing even more activity than I was doing before. While before the lockdown it was just diving and aerials, moving forward it'll be diving, aerials, rock climbing and hiking all on a weekly basis. If I can do all that and keep up the bodyweight workouts twice a week, I should be back to a healthier size in a couple of months!
